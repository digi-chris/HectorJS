var fonts = {
  "pixel3x5" : {
    width: 3,
    height: 5,
    monospace: true,
    chars : {
      '0' : [ 0, 1, 0,
              1, 0, 1,
              1, 0, 1,
              1, 0, 1,
              0, 1, 0 ],
      '1' : [ 1, 1, 0,
              0, 1, 0,
              0, 1, 0,
              0, 1, 0,
              0, 1, 0 ],
      '2' : [ 1, 1, 1,
              0, 0, 1,
              0, 1, 0,
              1, 0, 0,
              1, 1, 1 ],
      '3' : [ 1, 1, 1,
              0, 0, 1,
              0, 1, 0,
              0, 0, 1,
              1, 1, 1 ],
      '4' : [ 1, 0, 1,
              1, 0, 1,
              1, 1, 1,
              0, 0, 1,
              0, 0, 1 ],
      '5' : [ 1, 1, 1,
              1, 0, 0,
              1, 1, 0,
              0, 0, 1,
              1, 1, 0 ],
      '6' : [ 0, 1, 1,
              1, 0, 0,
              1, 1, 1,
              1, 0, 1,
              1, 1, 1 ],
      '7' : [ 1, 1, 1,
              0, 0, 1,
              0, 1, 0,
              1, 0, 0,
              1, 0, 0 ],
      '8' : [ 1, 1, 1,
              1, 0, 1,
              1, 1, 1,
              1, 0, 1,
              1, 1, 1 ],
      '9' : [ 1, 1, 1,
              1, 0, 1,
              1, 1, 1,
              0, 0, 1,
              0, 0, 1 ]
    }
  },
  "pixel5x8" : {
    width : 5,
    height : 8,
    monospace: true,
    chars : {
      '0' : [ 0, 1, 1, 1, 0,
              1, 0, 0, 0, 1,
              1, 0, 0, 0, 1,
              1, 0, 0, 0, 1,
              1, 0, 0, 0, 1,
              1, 0, 0, 0, 1,
              1, 0, 0, 0, 1,
              0, 1, 1, 1, 0 ],
      '1' : [ 0, 0, 1, 1, 0,
              0, 1, 0, 1, 0,
              0, 0, 0, 1, 0,
              0, 0, 0, 1, 0,
              0, 0, 0, 1, 0,
              0, 0, 0, 1, 0,
              0, 0, 0, 1, 0,
              0, 0, 0, 1, 0 ],
      '2' : [ 0, 1, 1, 1, 0,
              1, 0, 0, 0, 1,
              0, 0, 0, 0, 1,
              0, 0, 0, 1, 0,
              0, 0, 1, 0, 0,
              0, 1, 0, 0, 0,
              1, 0, 0, 0, 0,
              1, 1, 1, 1, 1 ],
      '3' : [ 0, 1, 1, 1, 0,
              1, 0, 0, 0, 1,
              0, 0, 0, 0, 1,
              0, 0, 1, 1, 0,
              0, 0, 0, 0, 1,
              0, 0, 0, 0, 1,
              1, 0, 0, 0, 1,
              0, 1, 1, 1, 0 ],
      '4' : [ 0, 0, 0, 0, 1,
              0, 0, 0, 1, 1,
              0, 0, 1, 0, 1,
              0, 1, 0, 0, 1,
              1, 0, 0, 0, 1,
              1, 1, 1, 1, 1,
              0, 0, 0, 0, 1,
              0, 0, 0, 0, 1 ],
      '5' : [ 1, 1, 1, 1, 1,
              1, 0, 0, 0, 0,
              1, 0, 0, 0, 0,
              1, 1, 1, 1, 0,
              0, 0, 0, 0, 1,
              0, 0, 0, 0, 1,
              1, 0, 0, 0, 1,
              0, 1, 1, 1, 0 ],
      '6' : [ 0, 1, 1, 1, 0,
              1, 0, 0, 0, 1,
              1, 0, 0, 0, 0,
              1, 1, 1, 1, 0,
              1, 0, 0, 0, 1,
              1, 0, 0, 0, 1,
              1, 0, 0, 0, 1,
              0, 1, 1, 1, 0 ],
      '7' : [ 1, 1, 1, 1, 1,
              0, 0, 0, 0, 1,
              0, 0, 0, 1, 0,
              0, 0, 0, 1, 0,
              0, 0, 1, 0, 0,
              0, 0, 1, 0, 0,
              0, 1, 0, 0, 0,
              0, 1, 0, 0, 0 ],
      '8' : [ 0, 1, 1, 1, 0,
              1, 0, 0, 0, 1,
              1, 0, 0, 0, 1,
              0, 1, 1, 1, 0,
              1, 0, 0, 0, 1,
              1, 0, 0, 0, 1,
              1, 0, 0, 0, 1,
              0, 1, 1, 1, 0 ],
      '9' : [ 0, 1, 1, 1, 0,
              1, 0, 0, 0, 1,
              1, 0, 0, 0, 1,
              1, 0, 0, 0, 1,
              0, 1, 1, 1, 1,
              0, 0, 0, 0, 1,
              0, 0, 0, 0, 1,
              0, 1, 1, 1, 0 ]
    }
  }
};

module.exports.DrawText = function(bitmapFrame, x, y, text, font, color) {
  var charWidth = fonts[font].width;
  var charHeight = fonts[font].height;
  var currentX = x;
  for(char of text) {
    drawCharacter(char, bitmapFrame, currentX, y, font, color);
    currentX += charWidth + 1;
  }
}

function drawCharacter(character, bitmapFrame, xPos, yPos, font, color) {
  var digit = fonts[font].chars[character];
  if(Array.isArray(digit)) {
    var width = fonts[font].width;
    var height = fonts[font].height;
    var i = 0;
//    console.log('CHAR: ' + character);
    for(var y = 0; y < height; y++) {
//      var textLine = '';
      for(var x = 0; x < width; x++) {
//        textLine += digit[i] + ' ';
        if(digit[i]) {
          bitmapFrame.SetPixel(x + xPos, y + yPos, color);
        }
        i++;
      }
//      console.log(textLine);
    }
  }
}
